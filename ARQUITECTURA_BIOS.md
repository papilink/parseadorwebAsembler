# ğŸ—ï¸ Arquitectura del Sistema BIOS MSX2+

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ               SISTEMA BIOS MSX2+ - ARQUITECTURA              â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        INTERFAZ HTML                         â”‚
â”‚  index.html + CSS                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ’¾ GESTIÃ“N BIOS MSX2                                â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ ğŸ“‚ [Seleccionar archivo BIOS]                        â”‚  â”‚
â”‚  â”‚ ğŸ’¾ [CARGAR BIOS]                                    â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚ âœ… BIOS CARGADO                                      â”‚  â”‚
â”‚  â”‚ â€¢ Archivo: msxbios.rom                             â”‚  â”‚
â”‚  â”‚ â€¢ TamaÃ±o: 16384 bytes                              â”‚  â”‚
â”‚  â”‚ â€¢ Tipo: EstÃ¡ndar (16KB)                            â”‚  â”‚
â”‚  â”‚ â€¢ Checksum: A1B2C3D4                               â”‚  â”‚
â”‚  â”‚ ğŸ—‘ï¸ [DESCARGAR BIOS]                                â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚ â„¹ï¸ Archivos Soportados:                              â”‚  â”‚
â”‚  â”‚ â€¢ msxbios.rom (16-32 KB)                           â”‚  â”‚
â”‚  â”‚ â€¢ msx2bios.rom (16-32 KB)                          â”‚  â”‚
â”‚  â”‚ â€¢ msx2ext.rom (16 KB)                              â”‚  â”‚
â”‚  â”‚ â€¢ basic.rom (32 KB)                                â”‚  â”‚
â”‚  â”‚ â€¢ kanji.rom (16-32 KB)                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                        â†“                                     â”‚
â”‚               JavaScript Layer                              â”‚
â”‚           (index.html - lÃ­nea ~940)                         â”‚
â”‚                                                              â”‚
â”‚  â€¢ handleBiosFileSelect()                                   â”‚
â”‚  â€¢ loadBiosBtn.click() â†’ processor.load_bios()              â”‚
â”‚  â€¢ displayBiosInfo()                                        â”‚
â”‚  â€¢ unloadBiosBtn.click() â†’ processor.unload_bios()          â”‚
â”‚  â€¢ showBiosStatus()                                         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   WebAssembly Module (WASM)          â”‚
        â”‚  pkg/msx2_processor_bg.wasm (47 KB) â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BACKEND RUST (src/lib.rs)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [BiosValidator] (lÃ­nea 59)                           â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ valid_sizes: Vec<u32>                              â”‚  â”‚
â”‚  â”‚   â”œâ”€ 0x2000 (8 KB)                                   â”‚  â”‚
â”‚  â”‚   â”œâ”€ 0x4000 (16 KB) â† MÃS COMÃšN                      â”‚  â”‚
â”‚  â”‚   â”œâ”€ 0x8000 (32 KB)                                  â”‚  â”‚
â”‚  â”‚   â””â”€ 0x10000 (64 KB)                                 â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ â€¢ valid_types: Vec<String>                           â”‚  â”‚
â”‚  â”‚   â”œâ”€ "msxbios"                                       â”‚  â”‚
â”‚  â”‚   â”œâ”€ "msx2bios"                                      â”‚  â”‚
â”‚  â”‚   â”œâ”€ "msx2ext"                                       â”‚  â”‚
â”‚  â”‚   â”œâ”€ "kanji"                                         â”‚  â”‚
â”‚  â”‚   â””â”€ "basic"                                         â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ MÃ©todos:                                             â”‚  â”‚
â”‚  â”‚ â€¢ is_valid_size(u32) â†’ bool                          â”‚  â”‚
â”‚  â”‚ â€¢ is_valid_type(&str) â†’ bool                         â”‚  â”‚
â”‚  â”‚ â€¢ detect_bios_type(u32) â†’ String                     â”‚  â”‚
â”‚  â”‚ â€¢ calculate_checksum(&[u8]) â†’ String                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [BiosInfo] (lÃ­nea 28)                                â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ filename: String                                   â”‚  â”‚
â”‚  â”‚ â€¢ size: u32                                          â”‚  â”‚
â”‚  â”‚ â€¢ loaded: bool                                       â”‚  â”‚
â”‚  â”‚ â€¢ bios_type: String                                  â”‚  â”‚
â”‚  â”‚ â€¢ checksum: String (hex format)                      â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ MÃ©todos:                                             â”‚  â”‚
â”‚  â”‚ â€¢ get_filename() â†’ String                            â”‚  â”‚
â”‚  â”‚ â€¢ get_size() â†’ u32                                   â”‚  â”‚
â”‚  â”‚ â€¢ is_loaded() â†’ bool                                 â”‚  â”‚
â”‚  â”‚ â€¢ get_bios_type() â†’ String                           â”‚  â”‚
â”‚  â”‚ â€¢ get_checksum() â†’ String                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [MSX2Processor] (lÃ­nea 228)                          â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ NEW FIELDS:                                          â”‚  â”‚
â”‚  â”‚ â€¢ bios_data: Vec<u8>                                 â”‚  â”‚
â”‚  â”‚ â€¢ current_bios: Option<BiosInfo>                     â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ MÃ‰TODOS BIOS (lÃ­nea 346):                            â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ ğŸ”¹ load_bios() (lÃ­nea 346)                           â”‚  â”‚
â”‚  â”‚    Input:  bios_data, filename, bios_type            â”‚  â”‚
â”‚  â”‚    Output: String (mensaje de confirmaciÃ³n)          â”‚  â”‚
â”‚  â”‚    â”œâ”€ Valida tamaÃ±o                                  â”‚  â”‚
â”‚  â”‚    â”œâ”€ Calcula checksum                               â”‚  â”‚
â”‚  â”‚    â”œâ”€ Detecta tipo                                   â”‚  â”‚
â”‚  â”‚    â””â”€ Almacena en memoria                            â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ ğŸ”¹ get_current_bios_info() (lÃ­nea 380)               â”‚  â”‚
â”‚  â”‚    Output: String (JSON format)                      â”‚  â”‚
â”‚  â”‚    â””â”€ Retorna informaciÃ³n del BIOS cargado           â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ ğŸ”¹ has_bios_loaded() (lÃ­nea 395)                     â”‚  â”‚
â”‚  â”‚    Output: bool                                      â”‚  â”‚
â”‚  â”‚    â””â”€ Verifica si hay BIOS                           â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ ğŸ”¹ get_bios_data() (lÃ­nea 400)                       â”‚  â”‚
â”‚  â”‚    Output: Vec<u8>                                   â”‚  â”‚
â”‚  â”‚    â””â”€ Retorna datos en bruto                         â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ ğŸ”¹ unload_bios() (lÃ­nea 405)                         â”‚  â”‚
â”‚  â”‚    Output: String                                    â”‚  â”‚
â”‚  â”‚    â””â”€ Descarga BIOS actual                           â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ ğŸ”¹ get_bios_description() (lÃ­nea 415)                â”‚  â”‚
â”‚  â”‚    Output: String                                    â”‚  â”‚
â”‚  â”‚    â””â”€ DescripciÃ³n formateada                         â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ ğŸ”¹ validate_bios_checksum() (lÃ­nea 434)              â”‚  â”‚
â”‚  â”‚    Input:  expected_checksum                         â”‚  â”‚
â”‚  â”‚    Output: bool                                      â”‚  â”‚
â”‚  â”‚    â””â”€ Valida integridad                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [Mapa de Memoria MSX2]                               â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ 0x0000 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚        â”‚ BIOS/ROM (Slot 0)   [16 KB] â”‚ â† AQUÃ        â”‚  â”‚
â”‚  â”‚ 0x3FFF â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚  â”‚
â”‚  â”‚        â”‚ Cartridge (Slot 1)  [16 KB] â”‚               â”‚  â”‚
â”‚  â”‚ 0x7FFF â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚  â”‚
â”‚  â”‚        â”‚ RAM (Slot 2)        [16 KB] â”‚               â”‚  â”‚
â”‚  â”‚ 0xBFFF â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚  â”‚
â”‚  â”‚        â”‚ RAM Principal (Slot 3)[16 KB]               â”‚  â”‚
â”‚  â”‚ 0xFFFF â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ BIOS siempre en Slot 0                               â”‚  â”‚
â”‚  â”‚ MÃ¡ximo: 16 KB                                        â”‚  â”‚
â”‚  â”‚ Tipo: ROM (solo lectura)                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Flujo de Datos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     USUARIO                                 â”‚
â”‚  Selecciona archivo BIOS del sistema de archivos            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  HTML File Input #biosInput      â”‚
        â”‚  (index.html lÃ­nea 815)          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        handleBiosFileSelect(file)
                       â”‚
                       â”œâ”€ Validar tamaÃ±o
                       â”‚  (8KB, 16KB, 32KB, 64KB)
                       â”‚
                       â””â”€ Habilitar botÃ³n CARGAR
                                 â”‚
                                 â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Usuario hace click en:   â”‚
                  â”‚ CARGAR BIOS              â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                 loadBiosBtn click listener
                  (index.html lÃ­nea 960)
                                 â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                  â”‚
              FileReader.readAsArrayBuffer â”‚
              Convertir a Uint8Array       â”‚
                        â”‚                  â”‚
                        â†“                  â†“
             Array.from(biosData)   â†’   Array de nÃºmeros
                                 â”‚
                                 â†“
            processor.load_bios(biosArray, 
                               filename, 
                               bios_type)
                                 â”‚
                                 â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Rust WASM (lib.rs)     â”‚
                    â”‚  LÃ­nea 346              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                      â”‚
                Validar        Calcular checksum
                tamaÃ±o         (suma hex bytes)
                    â”‚                      â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚          â”‚           â”‚
                Detectar   Crear          Almacenar
                tipo       BiosInfo       en memoria
                    â”‚          â”‚           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                                       â”‚
                                       â†“
                      Return: "âœ… BIOS cargado:
                             test.rom (16384 bytes) -
                             Checksum: A1B2C3D4"
                                       â”‚
                                       â†“
        processor.get_current_bios_info()
              Obtener JSON con info
                                       â”‚
                                       â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Actualizar Interfaz HTML      â”‚
              â”‚  displayBiosInfo(biosInfo)     â”‚
              â”‚                                â”‚
              â”‚  â€¢ biosName.textContent        â”‚
              â”‚  â€¢ biosSize.textContent        â”‚
              â”‚  â€¢ biosType.textContent        â”‚
              â”‚  â€¢ biosChecksum.textContent    â”‚
              â”‚  â€¢ biosInfo.style.display      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ BIOS EN MEMORIA
                        â”‚
                        â†“
              Usuario puede:
              â€¢ Ver informaciÃ³n
              â€¢ Validar integridad
              â€¢ Descargar (unload_bios)
              
              
         â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
         â•‘    BIOS LISTO PARA EMULACIÃ“N      â•‘
         â•‘  Slot 0: 0x0000 - 0x3FFF          â•‘
         â•‘  TamaÃ±o: 16 KB                     â•‘
         â•‘  Estado: CARGADO âœ…               â•‘
         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ”„ Ciclo de Vida BIOS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ESTADO: VACÃO                            â”‚
â”‚  â€¢ bios_data.len() = 0                                      â”‚
â”‚  â€¢ current_bios = None                                      â”‚
â”‚  â€¢ has_bios_loaded() = false                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
              Usuario selecciona
              archivo BIOS
                       â”‚
                       â†“
         VALIDACIÃ“N: Â¿TamaÃ±o correcto?
              /              \
         SÃ (8,16,32,64KB)   NO
            â”‚                 â”‚
            â†“                 â†“
    CARGAR BIOS      âŒ MENSAJE ERROR
            â”‚         "TamaÃ±o invÃ¡lido"
            â”‚                 â”‚
            â†“                 â”‚
    Calcular checksum          â”‚
            â”‚                  â”‚
            â†“                  â”‚
    Crear BiosInfo             â”‚
            â”‚                  â”‚
            â†“                  â”‚
    Almacenar datos            â”‚
            â”‚                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ESTADO: CARGADO                            â”‚
â”‚  â€¢ bios_data = [12288 bytes cargados]                       â”‚
â”‚  â€¢ current_bios = Some(BiosInfo { ... })                    â”‚
â”‚  â€¢ has_bios_loaded() = true                                 â”‚
â”‚  â€¢ get_current_bios_info() = JSON vÃ¡lido                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
          (Usuario puede hacer:)
          â”œâ”€ get_bios_data()
          â”œâ”€ get_bios_description()
          â”œâ”€ validate_bios_checksum()
          â””â”€ unload_bios()
                       â”‚
                       â†“
              Usuario hace click en:
              "DESCARGAR BIOS"
                       â”‚
                       â†“
              processor.unload_bios()
                       â”‚
          â”œâ”€ Limpiar bios_data
          â”œâ”€ Eliminar current_bios
          â””â”€ Retornar confirmaciÃ³n
                       â”‚
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ESTADO: VACÃO                            â”‚
â”‚  â€¢ bios_data.len() = 0                                      â”‚
â”‚  â€¢ current_bios = None                                      â”‚
â”‚  â€¢ has_bios_loaded() = false                                â”‚
â”‚  âœ… Listo para cargar otro BIOS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Dependencias y MÃ³dulos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DEPENDENCIAS RUST                        â”‚
â”‚  (Cargo.toml)                                               â”‚
â”‚                                                              â”‚
â”‚  â€¢ wasm-bindgen = "0.2"  â† Bindings WASM                    â”‚
â”‚  â€¢ serde = "1.0"         â† SerializaciÃ³n (JSON)             â”‚
â”‚  â€¢ serde_json = "1.0"    â† JSON parser                      â”‚
â”‚  â€¢ num-traits = "0.2"    â† Operaciones numÃ©ricas            â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DEPENDENCIAS JAVASCRIPT                    â”‚
â”‚  (index.html)                                               â”‚
â”‚                                                              â”‚
â”‚  â€¢ JSZip (CDN) â† Para soporte de archivos ZIP               â”‚
â”‚  â€¢ pkg/msx2_processor.js â† WASM bindings generados          â”‚
â”‚  â€¢ Nativos del navegador:                                   â”‚
â”‚    â”œâ”€ File API (FileReader)                                 â”‚
â”‚    â”œâ”€ ArrayBuffer                                           â”‚
â”‚    â”œâ”€ Uint8Array                                            â”‚
â”‚    â””â”€ DOM API                                               â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Puntos Clave

### ValidaciÃ³n en MÃºltiples Niveles

```
Nivel 1: HTML
  â””â”€ File input accept=".rom,.bin,.dat"

Nivel 2: JavaScript
  â””â”€ Validar tamaÃ±o antes de cargar
    â”œâ”€ 8 KB   (0x2000)  âœ…
    â”œâ”€ 16 KB  (0x4000)  âœ… â† MÃ¡s comÃºn
    â”œâ”€ 32 KB  (0x8000)  âœ…
    â””â”€ 64 KB  (0x10000) âœ…

Nivel 3: Rust (WASM)
  â””â”€ Validar nuevamente en load_bios()
    â”œâ”€ Checksum automÃ¡tico
    â”œâ”€ Tipo automÃ¡tico
    â””â”€ Error si es invÃ¡lido
```

### Manejo de Errores

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Archivo invÃ¡lido?  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TamaÃ±o incorrecto  â”‚
â”‚         â†“           â”‚
â”‚   âŒ RECHAZADO      â”‚
â”‚         â”‚           â”‚
â”‚    Mostrar error    â”‚
â”‚    al usuario       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Seguridad

```
RESTRICCIONES IMPLEMENTADAS:

1. TamaÃ±o MÃ¡ximo
   â””â”€ Solo 8KB, 16KB, 32KB, 64KB â†’ Rechazo de archivos raros

2. UbicaciÃ³n en Memoria
   â””â”€ Siempre Slot 0 (0x0000-0x3FFF) â†’ Aislamiento

3. Tipo de Acceso
   â””â”€ ROM (solo lectura) â†’ No puede ser modificado

4. Integridad
   â””â”€ Checksum automÃ¡tico â†’ Detecta corrupciÃ³n

5. ValidaciÃ³n de Tipo
   â””â”€ Solo BIOS reconocidos â†’ Previene confusiones
```

---

**Â© 2026 PAPIWEB DESARROLLOS INFORMATICOS**
